<!DOCTYPE html><html lang="en"><script data-layout="true" type="module" src="/layout_data.js" defer="true"></script><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta charset="UTF-8"><script data-page="true" type="module" src="/loadhook/page_data.js" defer="true"></script><script type="module" src="/client.js" defer="true"></script><title>Elegance.JS</title><link rel="stylesheet" href="/index.css"/></html><body key="1" class="ease bg-background-10 text-text-10 dark:bg-text-10 dark:text-background-10 font-inter grid grid-cols-1 sm:gap-8 gap-0 sm:grid-cols-[300px_auto] grid-rows-[auto_auto] sm:grid-rows-1 h-full h-screen w-screen sm:pt-0 pt-[calc(2rem+24px)]"><div class="sm:hidden fixed w-full top-0 flex p-4 backdrop-blur-md flex flex-row items-center gap-2 justify-between"><h2 class="font-bold">Elegance.JS</h2><button class="" key="2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stoke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linjoin="round" class="stroke-text-10 dark:stroke-background-10"><path d="M4 5h16"/><path d="M4 12h16"/><path d="M4 19h16"/></svg></button></div><div class="fixed z-10 backdrop-blur-md bottom-0 right-4 w-max h-max p-2 bg-darken dark:bg-lighten border-text-10 rounded-full px-4 uppercase font-bold text-xs" hidden="false" id="toaster"></div><div key="3" class="px-4 sm:p-8 sm:pr-0 inset-0 z-10 sm:bg-transparent top-[calc(24px_+_2rem)] sm:top-0 text-text-10 dark:text-background-10 dark:bg-text-10 bg-background-10 sm:relative fixed flex flex-col h-[calc(100%-calc(24px+2rem))] sm:h-full w-full max-w-[600px]   -translate-x-full sm:translate-x-0"><h5 class="text-lg font-semibold mb-2">Reference</h5><ul class="flex flex-col gap-0"><div key="4"><a class="text-sm uppercase font-bold text-text-05 dark:text-background-05 hover:opacity-50" prefetch="hover" href="/" key="5">Introduction</a></div><div key="6"><a class="text-sm uppercase font-bold text-text-05 dark:text-background-05 hover:opacity-50" prefetch="hover" href="/api-routes" key="7">API Routes</a></div><div key="8"><a class="text-sm uppercase font-bold text-text-05 dark:text-background-05 hover:opacity-50" prefetch="hover" href="/routing" key="9">Routing</a></div><div key="10"><a class="text-sm uppercase font-bold text-text-05 dark:text-background-05 hover:opacity-50" prefetch="hover" href="/middleware" key="11">Middleware</a></div><div key="12"><a class="text-sm uppercase font-bold text-text-05 dark:text-background-05 hover:opacity-50" prefetch="hover" href="/loadhook" key="13">Loadhook</a></div></ul><div class="mt-auto flex items-center gap-2"><button key="14"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stoke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stroke-text-10 dark:stroke-background-10"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg></button><button key="15"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stoke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stroke-text-10 dark:stroke-background-10"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></svg></button></div></div><div class="h-full overflow-y-auto p-3 sm:p-0"><template layout-id="2"></template><article><h1 class="pb-2 mt-12 text-4xl">Loadhook</h1><p>A function that is called <em>in the browser</em> when the page loads.<br/><br/></p><p>They're great for setting up timers, fetching client-side data, binding values, etc.<br/></p><h2 class="pb-2 mt-12 text-3xl">How to use Loadhooks</h2><p>You can register a loadHook like so:<div class="bg-darken dark:bg-lighten p-2 rounded-sm w-max hover:cursor-pointer hover:opacity-80 duration-100 select-none my-2" key="20"><code class="font-plex-mono">import { loadHook } from "elegance-js"</code></div><div class="bg-darken dark:bg-lighten p-2 rounded-sm w-max hover:cursor-pointer hover:opacity-80 duration-100 select-none my-2" key="21"><code class="font-plex-mono">loadHook([], () => { console.log("Hello Browser!"); })</code></div><br/></p><p>The first parameter to the loadHook is a <strong>array of state</strong> that the loadHook<br/>would like to use in the browser.<br/><br/></p><p>The second parameter is the function itself.</p><h2 class="pb-2 mt-12 text-3xl">Passing in State</h2><p>Let's say you have declared some state:<div class="bg-darken dark:bg-lighten p-2 rounded-sm w-max hover:cursor-pointer hover:opacity-80 duration-100 select-none my-2" key="22"><code class="font-plex-mono">const myState = state("hello!")</code></div><br/></p><p>This state, when created, exists in the <em>server</em>.<br/>And such, browser-side code will have no idea what you're referring to,<br/>if you just say "myState.value" in the loadHooks function body.<br/><br/></p><p>This is why you must <em>pass in references</em> to the state you want to use,<br/>via a dependency array:<div class="bg-darken dark:bg-lighten p-2 rounded-sm w-max hover:cursor-pointer hover:opacity-80 duration-100 select-none my-2" key="23"><code class="font-plex-mono">loadHook([myState], (_, myState) => { console.log(myState.value); })</code></div></p><h2 class="pb-2 mt-12 text-3xl">State Manager</h2><p>The client's state manager is also available in the loadHook's function body.<br/><br/></p><p>You can use it to do things like register new observers for state subjects:<div class="bg-darken dark:bg-lighten p-2 rounded-sm w-max hover:cursor-pointer hover:opacity-80 duration-100 select-none my-2" key="24"><code class="font-plex-mono">const updateCallback = (value: string) => { console.log(value); };</code></div><div class="bg-darken dark:bg-lighten p-2 rounded-sm w-max hover:cursor-pointer hover:opacity-80 duration-100 select-none my-2" key="25"><code class="font-plex-mono">loadHook([myState], (state, myState) => { state.observe(myState, updateCallback, "some-key"); })</code></div></p></article><div class="h-48"></div></div></body>